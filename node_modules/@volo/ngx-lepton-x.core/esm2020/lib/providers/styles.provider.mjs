import { APP_INITIALIZER } from '@angular/core';
import { LPX_INITIAL_STYLES, StyleService } from '../style';
import { LanguageService } from '../services';
import { switchMap, take } from 'rxjs/operators';
import { from } from 'rxjs';
export const LPX_STYLE_PROVIDERS = [
    {
        provide: LPX_INITIAL_STYLES,
        useFactory: () => [],
    },
    {
        provide: APP_INITIALIZER,
        deps: [StyleService, LanguageService],
        useFactory: loadInitialStyles,
        multi: true,
    },
];
export function loadInitialStyles(styleService, languageService) {
    return () => {
        return languageService.languageChange$.pipe(take(1), switchMap((lang) => from(styleService.initStyles(lang.isRTL ? 'rtl' : 'ltr'))));
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3R5bGVzLnByb3ZpZGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9sZXB0b24teC1jb3JlL3NyYy9saWIvcHJvdmlkZXJzL3N0eWxlcy5wcm92aWRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsZUFBZSxFQUFZLE1BQU0sZUFBZSxDQUFDO0FBQzFELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxZQUFZLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFDNUQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUM5QyxPQUFPLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ2pELE9BQU8sRUFBYyxJQUFJLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFFeEMsTUFBTSxDQUFDLE1BQU0sbUJBQW1CLEdBQWU7SUFDN0M7UUFDRSxPQUFPLEVBQUUsa0JBQWtCO1FBQzNCLFVBQVUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFO0tBQ3JCO0lBQ0Q7UUFDRSxPQUFPLEVBQUUsZUFBZTtRQUN4QixJQUFJLEVBQUUsQ0FBQyxZQUFZLEVBQUUsZUFBZSxDQUFDO1FBQ3JDLFVBQVUsRUFBRSxpQkFBaUI7UUFDN0IsS0FBSyxFQUFFLElBQUk7S0FDWjtDQUNGLENBQUM7QUFFRixNQUFNLFVBQVUsaUJBQWlCLENBQy9CLFlBQTBCLEVBQzFCLGVBQWdDO0lBRWhDLE9BQU8sR0FBRyxFQUFFO1FBQ1YsT0FBTyxlQUFlLENBQUMsZUFBZSxDQUFDLElBQUksQ0FDekMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUNQLFNBQVMsQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFLENBQ2pCLElBQUksQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FDMUQsQ0FDRixDQUFDO0lBQ0osQ0FBQyxDQUFDO0FBQ0osQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFQUF9JTklUSUFMSVpFUiwgUHJvdmlkZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTFBYX0lOSVRJQUxfU1RZTEVTLCBTdHlsZVNlcnZpY2UgfSBmcm9tICcuLi9zdHlsZSc7XHJcbmltcG9ydCB7IExhbmd1YWdlU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzJztcclxuaW1wb3J0IHsgc3dpdGNoTWFwLCB0YWtlIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBmcm9tIH0gZnJvbSAncnhqcyc7XHJcblxyXG5leHBvcnQgY29uc3QgTFBYX1NUWUxFX1BST1ZJREVSUzogUHJvdmlkZXJbXSA9IFtcclxuICB7XHJcbiAgICBwcm92aWRlOiBMUFhfSU5JVElBTF9TVFlMRVMsXHJcbiAgICB1c2VGYWN0b3J5OiAoKSA9PiBbXSxcclxuICB9LFxyXG4gIHtcclxuICAgIHByb3ZpZGU6IEFQUF9JTklUSUFMSVpFUixcclxuICAgIGRlcHM6IFtTdHlsZVNlcnZpY2UsIExhbmd1YWdlU2VydmljZV0sXHJcbiAgICB1c2VGYWN0b3J5OiBsb2FkSW5pdGlhbFN0eWxlcyxcclxuICAgIG11bHRpOiB0cnVlLFxyXG4gIH0sXHJcbl07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbG9hZEluaXRpYWxTdHlsZXMoXHJcbiAgc3R5bGVTZXJ2aWNlOiBTdHlsZVNlcnZpY2UsXHJcbiAgbGFuZ3VhZ2VTZXJ2aWNlOiBMYW5ndWFnZVNlcnZpY2VcclxuKTogKCkgPT4gT2JzZXJ2YWJsZTxhbnk+IHtcclxuICByZXR1cm4gKCkgPT4ge1xyXG4gICAgcmV0dXJuIGxhbmd1YWdlU2VydmljZS5sYW5ndWFnZUNoYW5nZSQucGlwZShcclxuICAgICAgdGFrZSgxKSxcclxuICAgICAgc3dpdGNoTWFwKChsYW5nKSA9PlxyXG4gICAgICAgIGZyb20oc3R5bGVTZXJ2aWNlLmluaXRTdHlsZXMobGFuZy5pc1JUTCA/ICdydGwnIDogJ2x0cicpKVxyXG4gICAgICApXHJcbiAgICApO1xyXG4gIH07XHJcbn1cclxuIl19